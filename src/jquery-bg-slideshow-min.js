/**
 * Author  : Sunil Samuel (web_github@sunilsamuel.com)
 * License : GPLv3
 * GIT URL : https://github.com/sunil-samuel/jquery-responsive-background-slideshow
 */
!function(e){e.fn.bgSlideShow=function(n){var t=new Array,a=e.extend({current:0,images:[],transitionDelay:5e3,transitionSpeed:3e3,transitionEffect:"fade-in",randomize:!1,initialBackground:null,debug:!1,eventHandlers:{beforeInit:null,afterInit:null,beforeChange:null,afterChange:null}},n);return this.each(function(n,t){var i,u,g=function(n,t){var i={};i.current=e(n).data("current")||t.current||0,i.images=t.images,e(n).data("images")&&(i.images=e(n).data("images").split(",").map(e=>e.trim()));return i.initialBackground=e(n).data("initialbackground")||t.initialBackground,i.transitionDelay=e(n).data("transitionDelay")||t.transitionDelay,i.transitionSpeed=e(n).data("transitionspeed")||t.transitionSpeed,i.transitionEffect=e(n).data("transitioneffect")||t.transitionEffect,i.randomize=r(e(n).data("randomize"),t.randomize),i.debug=r(e(n).data("debug"),t.debug),i.eventHandlers=t.eventHandlers,i.defaultDisplay=e(n).css("display")||"block",o(i.debug,"TransitiontTime ["+i.transitionDelay+"] transitionSpeed ["+i.transitionSpeed+"]"),i}(this,a);g.eventHandlers.beforeInit&&g.eventHandlers.beforeInit(this,g),i=this,o((u=g).debug,"ProcessShow with element ["+i+"]"),function(n,t){if(t.initialBackground){o(t.debug,"Setting initial image");var i=t.initialBackground,a="";if(!isNaN(i)&&i<t.images.length)a=t.images[i],t.current=i+1;else if("random"==i.toLowerCase()){var r=t.randomize;t.randomize=!0,a=s(t),t.randomize=r}else a=t.initialBackground;e(n).css("background-image","url("+a+")")}}(i,u),l(u.images),e(i).wrap("<div class='wrap-bg-element' style='position:relative;';></div>"),e(i).css("position","absolute"),o(u.debug,"Setting timeout for element ["+i+"]"),u.timerId=setTimeout(d,u.transitionDelay,i,u),g.eventHandlers.afterInit&&g.eventHandlers.afterInit(this,g),o(g.debug,"Done processing element ["+t+"] number ["+n+"]")});function r(e,n){return void 0===e?n:"boolean"==typeof e?e:(e=e.trim().toLowerCase()).startsWith("t")||e.startsWith("y")||1==e}function o(e,n){e&&console.log(n)}function s(e){if(e.randomize){for(var n=e.current;n==e.current;)n=Math.floor(Math.random()*e.images.length);return e.current=n,e.images[n]}e.current>=e.images.length&&(e.current=0);var t=e.images[e.current];return e.current=e.current+1,t}function d(n,t){o(t.debug,"Calling timer for element ["+n+"]");var i=s(t);o(t.debug,"Next image is ["+i+"]"),t.eventHandlers.beforeChange&&t.eventHandlers.beforeChange(n,t,i),t.cloned=e(n).clone(),e(t.cloned).addClass("cloned").css({"z-index":-100,display:"none","background-image":"url("+i+")"}).insertAfter(e(n)),e(t.cloned).css("display",t.defaultDisplay),o(t.debug,"Before element fadeout"),e(n).stop().fadeOut(t.transitionSpeed,function(){o(t.debug,"Fading out is done - should remove cloned element"),e(this).css({"background-image":"url("+i+")",position:"absolute",display:t.defaultDisplay});var a=e(t.cloned).remove();o(t.debug,"Total removed ["+a.length+"]"),t.eventHandlers.afterChange&&t.eventHandlers.afterChange(n,t,i),t.timerId=setTimeout(d,t.transitionDelay,n,t)})}function l(e){for(i=0;i<e.length;i++){var n=l.length;t[n]=new Image,t[n].src=e[i]}}}}(jQuery);