/**
 * Author  : Sunil Samuel (web_github@sunilsamuel.com)
 * License : GPLv3
 * GIT URL : https://github.com/sunil-samuel/jquery-responsive-background-slideshow
 */
!function(e){e.fn.bgSlideShow=function(n){var t=new Array,a=e.extend({current:-1,images:[],transitionDelay:5e3,transitionSpeed:3e3,transitionEffect:"fade-in",randomize:!1,initialBackground:null,debug:!1,eventHandlers:{beforeInit:null,afterInit:null,beforeChange:null,afterChange:null},slideControls:{enabled:!0,classes:"something"}},n);return this.each(function(n,t){var i=function(n,t){var a={};a.uniqueId=(i=n,s=e(i).attr("id"),s||(s="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZ".length))+Date.now()),s),a.current=e(n).data("current")||t.current||0,a.images=t.images,a.slideControls=t.slideControls,a.slideControls.enabled=e(n).data("slideControls.enabled")||t.slideControls.enabled,a.slideControls.classes=e(n).data("slideControls.classes")||t.slideControls.classes,e(n).data("images")&&(a.images=e(n).data("images").split(",").map(e=>e.trim()));var i,s;return a.initialBackground=e(n).data("initialbackground")||t.initialBackground,a.transitionDelay=e(n).data("transitiondelay")||t.transitionDelay,a.transitionSpeed=e(n).data("transitionspeed")||t.transitionSpeed,a.transitionEffect=e(n).data("transitioneffect")||t.transitionEffect,a.randomize=r(e(n).data("randomize"),t.randomize),a.debug=r(e(n).data("debug"),t.debug),a.eventHandlers=t.eventHandlers,a.defaultDisplay=e(n).css("display")||"block",a}(this,a);i.eventHandlers.beforeInit&&i.eventHandlers.beforeInit(this,i),function(n,t){s(t.debug,"ProcessShow with element ["+n+"]"),function(n,t){if(!t.initialBackground)return;s(t.debug,"Setting initial image");var a=t.initialBackground,i="";if(!isNaN(a)&&a<t.images.length)i=t.images[a],t.current=a+1;else if("random"==a.toLowerCase()){var r=t.randomize;t.randomize=!0,i=o(t),t.randomize=r}else i=t.initialBackground;e(n).css("background-image","url("+i+")")}(n,t),d(t.images),t.wrapBgElement=e("<div/>",{class:"jquery-bg-slideshow-wrap-bg-element",id:t.uniqueId+"-wrap-widget"}),e(n).wrap(t.wrapBgElement);var a=e(n).css("position","absolute");(function(n,t,a){if(s(a.debug,"List controls enabled: "+a.slideControls.enabled),1==a.slideControls.enabled){a.slideControlsElement=e("<div/>",{class:"jquery-bg-slideshow-list-control-element"+(a.slideControls.classes?" "+a.slideControls.classes:"")});for(var i=a.images.length,r=0;r<i;r++){var o=a.uniqueId+"-image"+r;e("<div/>",{class:"jquery-bg-slideshow-list-control-image-element",id:o}).appendTo(a.slideControlsElement)}e(t).append(a.slideControlsElement),e("[id^='"+a.uniqueId+"-image']").off("click").on("click",function(){e(a.cloned).remove();var t=e(this).attr("id"),i=parseInt(t.match(/-image(\d+)/)[1]);a.current=i+1,e(n).css("background-image","url("+a.images[i]+")"),console.log("clicked on ["+e(this).attr("id")+"]")})}})(n,a.parent(),t),s(t.debug,"Setting timeout for element ["+n+"]"),t.timerId=setTimeout(l,t.transitionDelay,n,t)}(this,i),i.eventHandlers.afterInit&&i.eventHandlers.afterInit(this,i),s(i.debug,"Done processing element ["+t+"] number ["+n+"]")});function r(e,n){return void 0===e?n:"boolean"==typeof e?e:(e=e.trim().toLowerCase()).startsWith("t")||e.startsWith("y")||1==e}function s(e,n){e&&console.log(n)}function o(e){if(e.randomize){for(var n=e.current;n==e.current;)n=Math.floor(Math.random()*e.images.length);return e.current=n,e.images[n]}e.current>=e.images.length&&(e.current=0);var t=e.images[e.current];return e.current=e.current+1,t}function l(n,t){s(t.debug,"Calling timer for element ["+n+"]"),function(n,t,a){t.eventHandlers.beforeChange&&t.eventHandlers.beforeChange(n,t,a);e(t.cloned).length&&e(t.cloned).remove();t.cloned=e(n).clone(),e(t.cloned).addClass("jquery-bg-slideshow-cloned").css({"background-image":"url("+a+")"}).insertAfter(e(n)),e(t.cloned).css("display",t.defaultDisplay),s(t.debug,"Before element fadeout"),e(n).stop().fadeOut(t.transitionSpeed,function(){s(t.debug,"Fading out is done - should remove cloned element"),e(this).css({"background-image":"url("+a+")",position:"absolute",display:t.defaultDisplay});var i=e(t.cloned).remove();s(t.debug,"Total removed ["+i.length+"]"),t.eventHandlers.afterChange&&t.eventHandlers.afterChange(n,t,a),t.timerId=setTimeout(l,t.transitionDelay,n,t)})}(n,t,o(t))}function d(e){for(i=0;i<e.length;i++){var n=d.length;t[n]=new Image,t[n].src=e[i]}}}}(jQuery);